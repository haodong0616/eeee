# ðŸ“± æ‰‹æœºå±€åŸŸç½‘è®¿é—®æŒ‡å—

## ðŸŽ¯ æ™ºèƒ½ä»£ç†æ¨¡å¼ï¼ˆæŽ¨èï¼‰

çŽ°åœ¨ä½¿ç”¨ Next.js API Routes ä»£ç†ï¼Œ**å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œé›¶é…ç½®**ï¼

## å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨åŽç«¯

```bash
cd backend
go run main.go
```

### 2. å¯åŠ¨å‰ç«¯ï¼ˆå·²é…ç½®å±€åŸŸç½‘è®¿é—®ï¼‰

```bash
cd frontend
npm run dev
```

æœåŠ¡ä¼šè‡ªåŠ¨ç›‘å¬ `0.0.0.0:3000`ï¼Œæ”¯æŒå±€åŸŸç½‘è®¿é—®ã€‚

### 3. æŸ¥çœ‹ä½ çš„å±€åŸŸç½‘åœ°å€

å‰ç«¯å¯åŠ¨åŽä¼šæ˜¾ç¤ºï¼š
```
- Local:    http://localhost:3000
- Network:  http://192.168.1.100:3000  â† ç”¨è¿™ä¸ªï¼
```

### 4. æ‰‹æœºè®¿é—®

åœ¨æ‰‹æœºæµè§ˆå™¨è¾“å…¥ Network åœ°å€ï¼š
```
http://192.168.1.100:3000
```

**å°±è¿™ä¹ˆç®€å•ï¼** ðŸŽ‰

## æ³¨æ„äº‹é¡¹

### âš ï¸ åŽç«¯APIåœ°å€

å¦‚æžœåŽç«¯ä¹Ÿåœ¨åŒä¸€å°ç”µè„‘ä¸Šè¿è¡Œï¼Œéœ€è¦ç¡®ä¿åŽç«¯ä¹Ÿæ”¯æŒå±€åŸŸç½‘è®¿é—®ã€‚

**æ£€æŸ¥åŽç«¯é…ç½®**ï¼š
```bash
cd backend
# ç¡®ä¿ç›‘å¬ 0.0.0.0:8080 æˆ– :8080
```

**æ›´æ–°å‰ç«¯ API åœ°å€**ï¼ˆå¦‚æžœéœ€è¦ï¼‰ï¼š

åˆ›å»º `frontend/.env.local`ï¼š
```env
NEXT_PUBLIC_API_URL=http://192.168.1.100:8080
NEXT_PUBLIC_WS_URL=ws://192.168.1.100:8080
```

å°† `192.168.1.100` æ›¿æ¢ä¸ºä½ çš„å®žé™…IPåœ°å€ã€‚

### ðŸ”¥ é˜²ç«å¢™è®¾ç½®

ç¡®ä¿é˜²ç«å¢™å…è®¸ç«¯å£è®¿é—®ï¼š

**Mac**ï¼š
```bash
# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate

# å¦‚æžœå¼€å¯ï¼Œå…è®¸ç«¯å£
# ç³»ç»Ÿåå¥½è®¾ç½® -> å®‰å…¨æ€§ä¸Žéšç§ -> é˜²ç«å¢™ -> é˜²ç«å¢™é€‰é¡¹
```

**Windows**ï¼š
```bash
# å…è®¸ç«¯å£ 3000 å’Œ 8080
netsh advfirewall firewall add rule name="Next.js Dev" dir=in action=allow protocol=TCP localport=3000
netsh advfirewall firewall add rule name="Golang Backend" dir=in action=allow protocol=TCP localport=8080
```

### ðŸ“± æ‰‹æœºç«¯è¦æ±‚

1. **åŒä¸€WiFiç½‘ç»œ**ï¼šæ‰‹æœºå’Œç”µè„‘å¿…é¡»åœ¨åŒä¸€å±€åŸŸç½‘
2. **è¾“å…¥å®Œæ•´URL**ï¼šåŒ…æ‹¬ `http://`
3. **ä½¿ç”¨å±€åŸŸç½‘IP**ï¼šä¸è¦ç”¨ `localhost`

## å®Œæ•´å¯åŠ¨æµç¨‹

### æ–¹å¼1ï¼šä½¿ç”¨çŽ¯å¢ƒå˜é‡ï¼ˆæŽ¨èï¼‰

1. **èŽ·å–ä½ çš„IPåœ°å€**ï¼š
```bash
# Mac/Linux
ifconfig | grep "inet " | grep -v 127.0.0.1 | awk '{print $2}'

# å‡è®¾è¾“å‡º: 192.168.1.100
```

2. **åˆ›å»ºçŽ¯å¢ƒå˜é‡æ–‡ä»¶**ï¼š
```bash
cd frontend
cat > .env.local << EOF
NEXT_PUBLIC_API_URL=http://192.168.1.100:8080
NEXT_PUBLIC_WS_URL=ws://192.168.1.100:8080
EOF
```

3. **å¯åŠ¨æœåŠ¡**ï¼š
```bash
# å¯åŠ¨åŽç«¯
cd backend
go run main.go

# å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd frontend
npm run dev
```

4. **æ‰‹æœºè®¿é—®**ï¼š
```
http://192.168.1.100:3000
```

### æ–¹å¼2ï¼šè‡ªåŠ¨åŒ–è„šæœ¬

åˆ›å»º `start-mobile.sh`ï¼š
```bash
#!/bin/bash

# èŽ·å–å±€åŸŸç½‘IP
IP=$(ifconfig | grep "inet " | grep -v 127.0.0.1 | awk '{print $2}' | head -1)

echo "ðŸŒ å±€åŸŸç½‘IP: $IP"
echo ""
echo "ðŸ“± æ‰‹æœºè®¿é—®åœ°å€ï¼š"
echo "   http://$IP:3000"
echo ""
echo "ðŸ”§ åŽç«¯APIåœ°å€ï¼š"
echo "   http://$IP:8080"
echo ""

# åˆ›å»ºçŽ¯å¢ƒå˜é‡
cd frontend
cat > .env.local << EOF
NEXT_PUBLIC_API_URL=http://$IP:8080
NEXT_PUBLIC_WS_URL=ws://$IP:8080
EOF

echo "âœ… çŽ¯å¢ƒå˜é‡å·²é…ç½®"
echo ""
echo "ðŸš€ å¯åŠ¨ä¸­..."
npm run dev
```

ä½¿ç”¨ï¼š
```bash
chmod +x start-mobile.sh
./start-mobile.sh
```

## å¸¸è§é—®é¢˜

### Q: æ‰‹æœºæ— æ³•è®¿é—®ï¼Ÿ

**æ£€æŸ¥æ¸…å•**ï¼š
1. âœ… æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€WiFiï¼Ÿ
2. âœ… ä½¿ç”¨æ­£ç¡®çš„IPåœ°å€ï¼Ÿï¼ˆä¸æ˜¯127.0.0.1ï¼‰
3. âœ… URLåŒ…å« `http://`ï¼Ÿ
4. âœ… ç«¯å£å·æ­£ç¡®ï¼Ÿï¼ˆ3000ï¼‰
5. âœ… é˜²ç«å¢™å…è®¸ï¼Ÿ

### Q: APIè¯·æ±‚å¤±è´¥ï¼Ÿ

ç¡®ä¿å‰ç«¯é…ç½®äº†æ­£ç¡®çš„åŽç«¯åœ°å€ï¼š

```bash
cd frontend
cat .env.local
# åº”è¯¥æ˜¾ç¤ºä½ çš„å±€åŸŸç½‘IPï¼Œä¸æ˜¯localhost
```

### Q: WebSocketè¿žæŽ¥å¤±è´¥ï¼Ÿ

æ£€æŸ¥ `.env.local` ä¸­çš„ WebSocket åœ°å€ï¼š
```env
NEXT_PUBLIC_WS_URL=ws://192.168.1.100:8080
```

### Q: å¦‚ä½•çŸ¥é“å‰ç«¯æ˜¯å¦æ­£ç¡®ç›‘å¬ï¼Ÿ

å¯åŠ¨å‰ç«¯åŽï¼Œæ—¥å¿—åº”è¯¥æ˜¾ç¤ºï¼š
```
- Local:        http://localhost:3000
- Network:      http://192.168.1.100:3000
```

## ç”Ÿäº§éƒ¨ç½²

ç”Ÿäº§çŽ¯å¢ƒå»ºè®®ä½¿ç”¨åŸŸåï¼š

```env
NEXT_PUBLIC_API_URL=https://api.yourdomain.com
NEXT_PUBLIC_WS_URL=wss://api.yourdomain.com
```

## å®‰å…¨æç¤º

âš ï¸ å±€åŸŸç½‘è®¿é—®ä»…é€‚ç”¨äºŽï¼š
- å¼€å‘æµ‹è¯•
- å†…ç½‘æ¼”ç¤º
- åŒç½‘ç»œè®¾å¤‡

âŒ ä¸è¦ï¼š
- æš´éœ²åˆ°å…¬ç½‘
- åœ¨ä¸å®‰å…¨çš„WiFiä½¿ç”¨
- å¤„ç†çœŸå®žèµ„é‡‘

## å¿«é€Ÿæµ‹è¯•

åœ¨ç”µè„‘æµè§ˆå™¨è¾“å…¥ï¼š
```
http://192.168.1.100:3000
```

å¦‚æžœèƒ½è®¿é—®ï¼Œè¯´æ˜Žé…ç½®æˆåŠŸï¼ç„¶åŽåœ¨æ‰‹æœºæµè§ˆå™¨è¾“å…¥åŒæ ·åœ°å€å³å¯ã€‚

