# 数据初始化选项

## 三种初始化方式

### 1. 快速初始化（推荐新手）⚡
**脚本**：`scripts/init_data.go`

**数据量**：
- 交易记录：~40 条
- K线数据：每个交易对 × 10个周期 = 60根
- 时间跨度：最近1小时
- 生成时间：< 1秒
- 数据库大小：~5 MB

**使用场景**：
- ✅ 快速查看界面
- ✅ 功能测试
- ✅ 演示展示

**运行方式**：
```bash
cd backend
go run scripts/init_data.go
```

---

### 2. 30天数据（推荐开发）📊
**脚本**：`scripts/quick_init.go`

**数据量**：
- 交易记录：~4,000 条
- K线数据：丰富的多周期数据
- 时间跨度：最近30天
- 生成时间：~30秒
- 数据库大小：~50 MB

**使用场景**：
- ✅ 开发调试
- ✅ UI测试
- ✅ 性能测试
- ✅ K线图完整展示

**运行方式**：
```bash
cd backend
go run scripts/quick_init.go
```

**特点**：
- 每小时 2-5 笔交易
- 价格自然波动
- 完整的K线数据
- 适中的数据量

---

### 3. 一年历史数据（生产演示）📈
**脚本**：`scripts/init_year_data.go`

**数据量**：
- 交易记录：~50,000 条
- K线数据：完整的一年数据
- 时间跨度：365天
- 生成时间：5-10分钟
- 数据库大小：~150-200 MB

**使用场景**：
- ✅ 生产环境演示
- ✅ 长期趋势分析
- ✅ 投资者展示
- ✅ 完整的历史回测

**运行方式**：
```bash
cd backend
chmod +x scripts/init_year.sh
./scripts/init_year.sh
```

**特点**：
- 每天 20-50 笔交易
- 模拟真实市场周期
- 价格从低到高增长
- 完整的牛市周期
- 支持所有K线周期

---

## 数据对比

| 项目 | 快速初始化 | 30天数据 | 一年数据 |
|------|-----------|---------|---------|
| 交易记录 | 40 | 4,000 | 50,000 |
| 时间跨度 | 1小时 | 30天 | 365天 |
| 生成时间 | < 1秒 | ~30秒 | 5-10分钟 |
| 数据库大小 | ~5 MB | ~50 MB | ~200 MB |
| K线完整度 | ⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| 推荐场景 | 快速测试 | 日常开发 | 演示/生产 |

## 价格走势设计

### 一年数据的价格模拟

模拟真实的牛市周期：

```
LUNAR/USDT:
起点: $5,000 (一年前)
终点: $8,500 (现在)
涨幅: +70%
波动: ±5% 日内波动

NOVA/USDT:
起点: $800
终点: $1,250
涨幅: +56%

PULSE/USDT:
起点: $1.50
终点: $2.85
涨幅: +90%

ARCANA/USDT:
起点: $0.003
终点: $0.0085
涨幅: +183%
```

### 趋势特点

1. **整体向上** - 模拟牛市
2. **有回调** - 随机波动 ±5%
3. **真实波动** - 每天多次价格变化
4. **合理增长** - 线性增长 + 随机噪音

## 使用建议

### 场景 1：快速预览
```bash
go run scripts/init_data.go
```
1分钟内看到效果

### 场景 2：开发测试
```bash
go run scripts/quick_init.go
```
有足够的数据进行开发

### 场景 3：完整演示
```bash
./scripts/init_year.sh
```
给投资者看完整的历史数据

## 清理旧数据

如果想重新生成：

```bash
cd backend
rm expchange.db  # 删除数据库
go run scripts/init_year_data.go  # 重新生成
```

## 性能影响

### SQLite 性能
- 50,000 条交易记录：查询速度良好
- 建议添加索引（GORM已自动添加）
- 定期清理超过1年的数据

### 查询优化
```sql
-- 只查询最近30天
WHERE created_at >= datetime('now', '-30 days')

-- 分页查询
LIMIT 100 OFFSET 0
```

## 生成策略

### 交易频率
- **快速**：只有关键时间点
- **30天**：每小时几笔
- **一年**：每天20-50笔

### 价格生成
- **快速**：固定价格
- **30天**：随机波动
- **一年**：趋势 + 波动

### K线聚合
所有方式都会基于交易记录聚合K线：
- 1m, 3m, 5m, 15m, 30m
- 1h, 4h
- 1d

## 常见问题

### Q: 生成一年数据需要多久？
A: 5-10分钟，取决于机器性能

### Q: 数据库会不会太大？
A: ~200MB，SQLite完全可以处理

### Q: 可以生成更多年吗？
A: 可以，修改脚本中的时间跨度

### Q: 如何只生成某个交易对？
A: 修改脚本中的 `pairs` 数组

### Q: 生成后可以再追加吗？
A: 可以，脚本会检查并跳过已存在的数据

## 推荐流程

1. **开发阶段**：使用快速初始化
2. **测试阶段**：使用30天数据
3. **演示阶段**：使用一年数据
4. **生产环境**：使用真实交易数据

现在选择适合你的初始化方式吧！🚀

